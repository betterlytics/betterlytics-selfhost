# Betterlytics - Self-Hosted

Betterlytics is a modern, privacy-first analytics platform that provides powerful insights about your website traffic without compromising user privacy.
This repository provides everything you need to deploy Betterlytics on your own infrastructure using Docker.

## Quick Start

### 1. Configure

Run the interactive setup script to generate a `.env` file with secure random secrets:

```bash
chmod +x setup.sh
./setup.sh
```

Or copy `.env.example` to `.env` and fill in the values manually.

### 2. Deploy

```bash
docker compose up -d
```

## Deployment Modes

### Standalone (automatic HTTPS)

Set `SSL_ENABLED=true` in your `.env` file. The container will automatically provision TLS certificates via Let's Encrypt using the configured `DOMAIN`.

Ports 80 and 443 must be accessible from the internet for ACME challenges and HTTPS traffic. When using `setup.sh`, this is handled automatically â€” the script generates a `docker-compose.override.yml` that exposes port 443 alongside the default port 80.

### Behind a Reverse Proxy

Set `SSL_ENABLED=false` (default). The container listens on HTTP only. Point your external reverse proxy (nginx, Traefik, Cloudflare, etc.) to the configured `HTTP_PORT` (default: 80).

By default, `BIND_ADDRESS` is set to `127.0.0.1` so the container only accepts connections from localhost, preventing direct public access that bypasses your proxy.

If you need to customize port mappings beyond the defaults, create a `docker-compose.override.yml`:

```yaml
services:
  betterlytics-selfhost:
    ports:
      - "127.0.0.1:8080:80"
```

Docker Compose automatically merges this with `docker-compose.yml`. This file is gitignored and won't be overwritten by updates.

## Configuration Reference

| Variable              | Description                                                 | Default     |
| --------------------- | ----------------------------------------------------------- | ----------- |
| `SSL_ENABLED`         | Enable automatic HTTPS via Let's Encrypt                    | `false`     |
| `DOMAIN`              | Your Betterlytics domain                                    | `localhost` |
| `SSL_DOMAIN`          | Domain for the TLS certificate (set to `DOMAIN` by default) |             |
| `HTTP_PORT`           | Host port for HTTP traffic                                  | `80`        |
| `HTTPS_PORT`          | Host port for HTTPS traffic                                 | `443`       |
| `BIND_ADDRESS`        | Network interface to bind to                                | `127.0.0.1` |
| `PUBLIC_BASE_URL`     | Full public URL of your instance                            |             |
| `ADMIN_EMAIL`         | Admin account email                                         |             |
| `ADMIN_PASSWORD`      | Admin account password                                      |             |
| `ENABLE_GEOLOCATION`  | Enable IP geolocation (requires MaxMind)                    | `false`     |
| `MAXMIND_ACCOUNT_ID`  | MaxMind account ID                                          |             |
| `MAXMIND_LICENSE_KEY` | MaxMind license key                                         |             |

Database passwords, `NEXTAUTH_SECRET`, and `TOTP_SECRET_ENCRYPTION_KEY` are auto-generated by `setup.sh`. See `.env.example` for the full list.

## Requirements

- Docker and Docker Compose
- A domain name pointed to your server
- Ports 80/443 open (standalone mode) or a reverse proxy configured

## Documentation

For detailed instructions, advanced configuration, and troubleshooting, see the [Self-Hosting Guide](https://betterlytics.io/docs/installation/self-hosting).
